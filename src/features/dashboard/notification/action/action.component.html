<section class="p-6 rounded-2xl shadow bg-white_color mb-12">
  @switch (current_step()) {
  @case (1) {
  <h2 class="text-xl font-medium mb-4">Main Info</h2>

  <form [formGroup]="main_form" action="">
    <div class="form-group input_group col-span-12 lg:col-span-6 mb-6">
      <div class=" ">
        <label class="block mb-2" for="">{{"ALARMS.NAME"|translate}}</label>
        <input pInputText formControlName="name" [placeholder]="'ALARMS.NAME' | translate" />
      </div>
      @if(main_form.get('name')?.errors && main_form.get('name')?.touched){
      <p class="p-2 text-sm text-danger_color m-0">{{"ALARMS.ALARM_NAME_REQ"|translate}}</p>
      }
    </div>
    <div class="form-group input_group col-span-12 lg:col-span-6 mb-6">
      <div class=" ">
        <label class="block mb-2" for="">Description</label>
        <textarea name="" id="" rows="5"></textarea>
      </div>
      @if(main_form.get('name')?.errors && main_form.get('name')?.touched){
      <p class="p-2 text-sm text-danger_color m-0">{{"ALARMS.ALARM_NAME_REQ"|translate}}</p>
      }
    </div>
  </form>
  }
  @case(2){
  <h2 class="text-xl font-medium mb-4">Users</h2>

  <div class="grid grid-cols-12 gap-8">
    <div class="col-span-6 p-6 rounded-2xl shadow">
      <div class="mb-8">
        <h5 class="text-lg font-medium mb-4">Users</h5>
        <div class="adon-input relative w-full">
          <input pInputText [placeholder]="'USERS.SEARCH_PLACEHOLDER' | translate" />
          <i class="fi fi-rr-search text-xl flex items-center justify-center text-gray_light"></i>
        </div>
      </div>

      <div class="users h-72 overflow-y-auto">
        @for(user of users ; track $index){
        <div (click)="selected_users().push(user)"
          class="single_user cursor-pointer  mb-4 p-3 rounded-xl shadow flex items-center gap-4">
          <div class="user_img">
            <i class="fi fi-rr-circle-user text-4xl"></i>
          </div>
          <div>
            <p>{{user?.userName}}</p>
            <p>{{user?.companyName}}</p>
          </div>
        </div>
        }
      </div>
    </div>
    <div class="col-span-6 p-6 rounded-2xl shadow">
      <div class="mb-8">
        <h5 class="text-lg font-medium mb-4">Selected Users</h5>
        <div class="adon-input relative w-full">
          <input pInputText [placeholder]="'USERS.SEARCH_PLACEHOLDER' | translate" />
          <i class="fi fi-rr-search text-xl flex items-center justify-center text-gray_light"></i>
        </div>
      </div>

      <div class="users h-72 overflow-y-auto">
        @for(user of selected_users() ; track $index){
        <div class="single_user mb-4 p-3 rounded-xl shadow flex items-center gap-4">
          <div class="user_img">
            <i class="fi fi-rr-circle-user text-4xl"></i>
          </div>
          <div>
            <p>{{user?.userName}}</p>
            <p>{{user?.companyName}}</p>
          </div>
        </div>
        }
      </div>
    </div>
  </div>
  }
  }

</section>

<div class="actions flex items-center gap-4 justify-end">
  <div class="cancel_btn">
    <p-button label="Cancel " />
  </div>
  <div class="action_btn ">
    <p-button (onClick)="current_step.set(2)" [loading]="load_action()"
      [label]="current_step() == 4 ? currentUpdateId ? ' Update Notification' :'Add Notification' : 'Next'" />
  </div>
</div>